{"ast":null,"code":"import _slicedToArray from\"C:/Users/rubi/Documents/GitHub/xbt-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useEffect,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{toast,ToastContainer}from\"react-toastify\";import loginImg from\"../usingImages/loginImg.svg\";import{Link}from\"react-router-dom\";import{defaultAPI}from\"../api/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChangePassword(_ref){var user=_ref.user;if(user)return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});var passwordRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),passChanged=_useState2[0],setPass=_useState2[1];var confirm_passwordRef=useRef();var queryString=window.location.search;var urlParam=new URLSearchParams(queryString);if(passChanged){useEffect(function(){var timer=setTimeout(function(){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});},5000);return function(){return clearTimeout(timer);};},[]);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row resgister-div\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-6 offset-sm-3 \",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"div\",{className:\"card card-sign\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:loginImg,alt:\"\",className:\"loginImg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Change password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",className:\"login-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emailTb\",children:\"Enter password\"}),/*#__PURE__*/_jsx(\"input\",{ref:passwordRef,id:\"emailTb\",type:\"password\",className:\"form-control\",placeholder:\"password\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:confirm_passwordRef,id:\"emailTb\",type:\"password\",className:\"form-control\",placeholder:\"password\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sign\",onClick:function onClick(){var reset_token=urlParam.get('reset_token');try{fetch(\"\".concat(defaultAPI.api.authUrl,\"/identity/users/password/confirm_code?reset_password_token=\").concat(reset_token,\"&password=\").concat(passwordRef.current.value,\"&confirm_password=\").concat(confirm_passwordRef.current.value),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}}).then(toast.success(\"Password changed successfully! \\n You may login with your new password.\",{position:\"top-center\"},setPass(true))).catch(function(err){toast.error(\"Error!\",{position:\"top-center\"});});}catch(_unused){(function(err){console.log(err.message);});}},children:\"Forgot Password\"})})]})]})]})})]})})})});}export default ChangePassword;","map":{"version":3,"sources":["C:/Users/rubi/Documents/GitHub/xbt-frontend/src/components/ChangePassword.jsx"],"names":["React","useRef","useEffect","useState","Navigate","toast","ToastContainer","loginImg","Link","defaultAPI","ChangePassword","user","passwordRef","passChanged","setPass","confirm_passwordRef","queryString","window","location","search","urlParam","URLSearchParams","timer","setTimeout","clearTimeout","reset_token","get","fetch","api","authUrl","current","value","method","headers","Accept","then","success","position","catch","err","error","console","log","message"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState} from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport loginImg from \"../usingImages/loginImg.svg\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { defaultAPI } from \"../api/api\";\r\n\r\nfunction ChangePassword({ user }) {\r\n  if (user) return <Navigate to=\"/\" />;\r\n\r\n    const passwordRef = useRef();\r\n    const [passChanged, setPass] = useState(false);\r\n    const confirm_passwordRef = useRef();\r\n    const queryString = window.location.search\r\n    const urlParam = new URLSearchParams(queryString)\r\n    if(passChanged){\r\n    useEffect(()=>{\r\n      const timer = setTimeout(()=>{\r\n        return <Navigate to='/login'/>\r\n      }, 5000)\r\n      return () => clearTimeout(timer);\r\n    }, []);}\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"container\">\r\n        <div className=\"row resgister-div\">\r\n          <div className=\"col-sm-6 offset-sm-3 \">\r\n            <ToastContainer />\r\n            <div className=\"card card-sign\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <img src={loginImg} alt=\"\" className=\"loginImg\" />\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <strong>Change password</strong>\r\n\r\n                  <br />\r\n                  <br />\r\n                  <form action=\"\" className=\"login-form\">\r\n                    <label htmlFor=\"emailTb\">Enter password</label>\r\n                    <input\r\n                    ref={passwordRef}\r\n                      id=\"emailTb\"\r\n                      type=\"password\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"password\"\r\n                      required\r\n                    />\r\n                    <br />\r\n                    <input\r\n                    ref={confirm_passwordRef}\r\n                      id=\"emailTb\"\r\n                      type=\"password\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"password\"\r\n                      required\r\n                    />\r\n                    <br />\r\n\r\n                    <div className=\"btn-group\">\r\n                      \r\n                      <button type=\"button\" className=\"btn btn-sign\" onClick={() => {\r\n                          const reset_token = urlParam.get('reset_token');\r\n                            try{\r\n                         fetch(`${defaultAPI.api.authUrl}/identity/users/password/confirm_code?reset_password_token=${reset_token}&password=${passwordRef.current.value}&confirm_password=${confirm_passwordRef.current.value}`, {\r\n                            method: \"POST\",\r\n                            headers:{\r\n                                \"Content-Type\": \"application/json\",\r\n                                Accept: \"application/json\"\r\n                            }\r\n                            \r\n                        }).then(\r\n                            toast.success(\"Password changed successfully! \\n You may login with your new password.\", {\r\n                                position: \"top-center\"\r\n                            },\r\n                            setPass(true)\r\n                            )\r\n                        ).catch((err)=>{\r\n                          toast.error(\"Error!\", {\r\n                              position: \"top-center\"\r\n                          })\r\n                        })\r\n                    }catch{(err)=>{\r\n                        console.log(err.message)\r\n                    }}\r\n                      }}>\r\n                        Forgot Password\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChangePassword;\r\n"]},"metadata":{},"sourceType":"module"}