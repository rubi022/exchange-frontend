{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rubi\\\\Documents\\\\GitHub\\\\xbt-frontend\\\\src\\\\components\\\\dashboard\\\\Trade.js\",\n    _s = $RefreshSig$();\n\nimport { Navigate } from 'react-router-dom'; // import './css/customProfile.css';\n// import './js/scripts.js';\n\nimport './js/datatables-simple-demo.js';\nimport './css/styles.css'; // import { useEffect } from 'react';\n// import { Helmet } from \"react-helmet\";\n// import React, { useEffect, useState } from \"react\";\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios'; // import { getWithExpiry } from \"../../helper/utils\";\n\nimport { Link } from 'react-router-dom';\nimport DashboardNavbar from './base/DashboardNavbar';\nimport DashboardLayoutSideNav from './base/DashboardLayoutSideNav.js';\nimport Cookies from 'js-cookie';\nimport { defaultAPI } from '../../api/api.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Trade = _ref => {\n  _s();\n\n  let {\n    user,\n    setUser\n  } = _ref;\n  const getIteminfo = JSON.parse(localStorage.getItem('user-info'));\n  const cookieFromLogin = Cookies.get('_barong_session');\n  const [marketItem, setMarketItem] = useState([]); // get market item\n\n  useEffect(() => {\n    let isMounted = true;\n\n    async function getMarketItemData() {\n      const res = await fetch(`${defaultAPI.api.tradeUrl}/public/markets`);\n      const data = await res.json();\n      if (isMounted) setMarketItem(data);\n    }\n\n    getMarketItemData();\n    return () => {\n      isMounted = false;\n    };\n  }, []); // const value = getWithExpiry(\"user-info\");\n  // console.log(value);\n  // const cors = require('cors');\n  // const corsOptions = {\n  //   origin: 'https://cp.btfd.cc/api/v2/peatio/market/orders',\n  //   credentials: true,            //access-control-allow-credentials:true\n  //   optionSuccessStatus: 200\n  // }\n  // app.use(cors(corsOptions));\n\n  const [market, setMarket] = useState('');\n  const [side, setSide] = useState('buy');\n  const [ord_type, setOrd_type] = useState('limit');\n  const [price, setPrice] = useState('');\n  const [volume, setVolume] = useState(''); // console.log(user);\n  // submit buy sell form\n\n  const onSubmitBuySell = async e => {\n    e.preventDefault(); // const cookieFromLogin = Cookies.get('_barong_session');\n    // let item = { market, side, ord_type, price, volume, cookieFromLogin };\n\n    let item = {\n      market,\n      side,\n      ord_type,\n      price,\n      volume\n    };\n    const {\n      csrf_token\n    } = user; // console.log(user);\n    // const cookieFromLogin = Cookies.get('_barong_session');\n    // console.log(cookieFromLogin);\n\n    console.log(item); // let result = await fetch(\n    //   \"https://cp.btfd.cc/api/v2/peatio/market/orders\",\n    //   {\n    //     mode: 'no-cors',\n    //     withCredentials: 'true',\n    //     method: \"POST\",\n    //     body: JSON.stringify(item),\n    //     headers: {\n    //       \"Content-Type\": \"application/json\",\n    //       \"Accept\": \"application/json\",\n    //       \"Access-Control-Allow-Origin\": \"*\"\n    //     },\n    //   }\n    // );\n    // new request\n\n    let result = await fetch(`${defaultAPI.api.tradeUrl}/market/orders`, {\n      // mode: 'no-cors',\n      method: 'POST',\n      withCredentials: 'true',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRF-TOKEN': getIteminfo.value.csrf_token,\n        'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE,PATCH,OPTIONS',\n        // 'Accept': 'application/json',\n        // 'Content-Type': 'application/json',\n        // 'Authorization': `Bearer ${csrf_token}`,\n        Cookie: cookieFromLogin || undefined // 'Cache': 'no-cache',\n        // 'X-Csrf-Token': csrf_token || undefined\n        // Authorization: csrf_token || undefined,\n\n      },\n      credentials: 'same-origin',\n      // credentials: 'include',\n      body: JSON.stringify(item)\n    }); // another req\n    // let result = await axios.post('https://cp.btfd.cc/api/v2/peatio/market/orders', item, { withCredentials: true });\n\n    console.log(result); // result = await result.json();\n    // console.log({ result });\n    // console.log(result);\n    // if (!result.ok) {\n    //   result = await result.json();\n    //   console.log(result);\n    // }\n  }; // get market item list in view\n\n\n  const marketItemsList = marketItem.map(market => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: market.id,\n      children: market.name\n    }, market.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this);\n  });\n  if (!user) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sb-nav-fixed profilediv\",\n      children: [/*#__PURE__*/_jsxDEV(DashboardNavbar, {\n        user: user,\n        setUser: setUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"layoutSidenav\",\n        children: [/*#__PURE__*/_jsxDEV(DashboardLayoutSideNav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"layoutSidenav_content\",\n          children: /*#__PURE__*/_jsxDEV(\"main\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container-fluid px-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row mt-4  mt-5 \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6 offset-md-3 profile-user-form-div card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-center\",\n                    children: [' ', \"One Click Buy/Sell\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                    onSubmit: onSubmitBuySell,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-floating mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        id: \"floatingSelect\",\n                        \"aria-label\": \"Floating label select example\",\n                        value: market,\n                        onChange: e => setMarket(e.target.value),\n                        name: \"market\",\n                        children: marketItemsList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 161,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"floatingSelect\",\n                        children: \"Market\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-floating mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        id: \"floatingSelect\",\n                        \"aria-label\": \"Floating label select example\",\n                        value: side,\n                        onChange: e => setSide(e.target.value),\n                        name: \"side\",\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"buy\",\n                          children: \"Buy\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 193,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"sell\",\n                          children: \"Sell\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 196,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"floatingSelect\",\n                        children: \"Order Side\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 200,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-floating mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        id: \"floatingSelect\",\n                        \"aria-label\": \"Floating label select example\",\n                        value: ord_type,\n                        onChange: e => setOrd_type(e.target.value),\n                        name: \"ord_type\",\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"limit\",\n                          children: \"Limit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"market\",\n                          children: \"Market\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 220,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 205,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"floatingSelect\",\n                        children: \"Order Type\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control\",\n                        placeholder: \"Price\",\n                        \"aria-label\": \"Recipient's username\",\n                        \"aria-describedby\": \"basic-addon2\",\n                        value: price,\n                        onChange: e => setPrice(e.target.value),\n                        name: \"price\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: \"USDT\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 242,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control\",\n                        placeholder: \"Amount\",\n                        \"aria-label\": \"Recipient's username\",\n                        \"aria-describedby\": \"basic-addon2\",\n                        value: volume,\n                        onChange: e => setVolume(e.target.value),\n                        name: \"volume\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 250,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: \"AAVE\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 264,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row mb-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-md-12\",\n                        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                          className: \"list-group\",\n                          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"list-group-item\",\n                            children: [\"Total\", ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \" float-end\",\n                              children: [price * volume, \".0000000000 USDT\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 276,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 274,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"list-group-item\",\n                            children: [\"Available\", ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \" float-end\",\n                              children: \"9892.98970000 USDT\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 283,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 281,\n                            columnNumber: 57\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 273,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row mb-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-md-12\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"d-grid gap-2\",\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"submit\",\n                            value: \"Buy\",\n                            className: \"btn btn-primary\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 295,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 293,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 292,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 291,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Trade, \"/9FyzTBQXPO0RWP6ljb8LzsUJJw=\");\n\n_c = Trade;\nexport default Trade;\n\nvar _c;\n\n$RefreshReg$(_c, \"Trade\");","map":{"version":3,"sources":["C:/Users/rubi/Documents/GitHub/xbt-frontend/src/components/dashboard/Trade.js"],"names":["Navigate","React","useState","useEffect","axios","Link","DashboardNavbar","DashboardLayoutSideNav","Cookies","defaultAPI","Trade","user","setUser","getIteminfo","JSON","parse","localStorage","getItem","cookieFromLogin","get","marketItem","setMarketItem","isMounted","getMarketItemData","res","fetch","api","tradeUrl","data","json","market","setMarket","side","setSide","ord_type","setOrd_type","price","setPrice","volume","setVolume","onSubmitBuySell","e","preventDefault","item","csrf_token","console","log","result","method","withCredentials","headers","value","Cookie","undefined","credentials","body","stringify","marketItemsList","map","id","name","target"],"mappings":"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","sourcesContent":["import { Navigate } from 'react-router-dom'\r\n// import './css/customProfile.css';\r\n// import './js/scripts.js';\r\nimport './js/datatables-simple-demo.js'\r\nimport './css/styles.css'\r\n// import { useEffect } from 'react';\r\n// import { Helmet } from \"react-helmet\";\r\n// import React, { useEffect, useState } from \"react\";\r\nimport React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n// import { getWithExpiry } from \"../../helper/utils\";\r\nimport { Link } from 'react-router-dom'\r\nimport DashboardNavbar from './base/DashboardNavbar'\r\nimport DashboardLayoutSideNav from './base/DashboardLayoutSideNav.js'\r\nimport Cookies from 'js-cookie'\r\nimport { defaultAPI } from '../../api/api.js'\r\n\r\nconst Trade = ({ user, setUser }) => {\r\n    const getIteminfo = JSON.parse(localStorage.getItem('user-info'))\r\n    const cookieFromLogin = Cookies.get('_barong_session')\r\n    const [marketItem, setMarketItem] = useState([])\r\n    // get market item\r\n    useEffect(() => {\r\n        let isMounted = true\r\n\r\n        async function getMarketItemData() {\r\n            const res = await fetch(`${defaultAPI.api.tradeUrl}/public/markets`)\r\n            const data = await res.json()\r\n            if (isMounted) setMarketItem(data)\r\n        }\r\n        getMarketItemData()\r\n\r\n        return () => {\r\n            isMounted = false\r\n        }\r\n    }, [])\r\n\r\n    // const value = getWithExpiry(\"user-info\");\r\n    // console.log(value);\r\n    // const cors = require('cors');\r\n    // const corsOptions = {\r\n    //   origin: 'https://cp.btfd.cc/api/v2/peatio/market/orders',\r\n    //   credentials: true,            //access-control-allow-credentials:true\r\n    //   optionSuccessStatus: 200\r\n    // }\r\n    // app.use(cors(corsOptions));\r\n    const [market, setMarket] = useState('')\r\n    const [side, setSide] = useState('buy')\r\n    const [ord_type, setOrd_type] = useState('limit')\r\n    const [price, setPrice] = useState('')\r\n    const [volume, setVolume] = useState('')\r\n\r\n    // console.log(user);\r\n\r\n    // submit buy sell form\r\n    const onSubmitBuySell = async (e) => {\r\n        e.preventDefault()\r\n        // const cookieFromLogin = Cookies.get('_barong_session');\r\n\r\n        // let item = { market, side, ord_type, price, volume, cookieFromLogin };\r\n        let item = { market, side, ord_type, price, volume }\r\n\r\n        const { csrf_token } = user\r\n        // console.log(user);\r\n        // const cookieFromLogin = Cookies.get('_barong_session');\r\n        // console.log(cookieFromLogin);\r\n\r\n        console.log(item)\r\n\r\n        // let result = await fetch(\r\n        //   \"https://cp.btfd.cc/api/v2/peatio/market/orders\",\r\n\r\n        //   {\r\n\r\n        //     mode: 'no-cors',\r\n        //     withCredentials: 'true',\r\n        //     method: \"POST\",\r\n        //     body: JSON.stringify(item),\r\n        //     headers: {\r\n\r\n        //       \"Content-Type\": \"application/json\",\r\n        //       \"Accept\": \"application/json\",\r\n        //       \"Access-Control-Allow-Origin\": \"*\"\r\n        //     },\r\n        //   }\r\n        // );\r\n\r\n        // new request\r\n        let result = await fetch(`${defaultAPI.api.tradeUrl}/market/orders`, {\r\n            // mode: 'no-cors',\r\n            method: 'POST',\r\n            withCredentials: 'true',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-CSRF-TOKEN': getIteminfo.value.csrf_token,\r\n                'Access-Control-Allow-Methods':\r\n                    'GET,PUT,POST,DELETE,PATCH,OPTIONS',\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                // 'Authorization': `Bearer ${csrf_token}`,\r\n                Cookie: cookieFromLogin || undefined,\r\n                // 'Cache': 'no-cache',\r\n                // 'X-Csrf-Token': csrf_token || undefined\r\n                // Authorization: csrf_token || undefined,\r\n            },\r\n            credentials: 'same-origin',\r\n            // credentials: 'include',\r\n            body: JSON.stringify(item),\r\n        })\r\n\r\n        // another req\r\n\r\n        // let result = await axios.post('https://cp.btfd.cc/api/v2/peatio/market/orders', item, { withCredentials: true });\r\n\r\n        console.log(result)\r\n\r\n        // result = await result.json();\r\n        // console.log({ result });\r\n        // console.log(result);\r\n\r\n        // if (!result.ok) {\r\n        //   result = await result.json();\r\n        //   console.log(result);\r\n\r\n        // }\r\n    }\r\n\r\n    // get market item list in view\r\n\r\n    const marketItemsList = marketItem.map((market) => {\r\n        return (\r\n            <option key={market.id} value={market.id}>\r\n                {market.name}\r\n            </option>\r\n        )\r\n    })\r\n\r\n    if (!user) return <Navigate to=\"/login\" />\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"sb-nav-fixed profilediv\">\r\n                <DashboardNavbar user={user} setUser={setUser} />\r\n\r\n                <div id=\"layoutSidenav\">\r\n                    <DashboardLayoutSideNav />\r\n                    <div id=\"layoutSidenav_content\">\r\n                        <main>\r\n                            <div className=\"container-fluid px-4\">\r\n                                {/* for a user form */}\r\n\r\n                                <div className=\"row mt-4  mt-5 \">\r\n                                    <div className=\"col-md-6 offset-md-3 profile-user-form-div card\">\r\n                                        <h3 className=\"text-center\">\r\n                                            {' '}\r\n                                            One Click Buy/Sell\r\n                                        </h3>\r\n\r\n                                        <form onSubmit={onSubmitBuySell}>\r\n                                            <div className=\"form-floating mb-3\">\r\n                                                <select\r\n                                                    className=\"form-select\"\r\n                                                    id=\"floatingSelect\"\r\n                                                    aria-label=\"Floating label select example\"\r\n                                                    value={market}\r\n                                                    onChange={(e) =>\r\n                                                        setMarket(\r\n                                                            e.target.value\r\n                                                        )\r\n                                                    }\r\n                                                    name=\"market\"\r\n                                                >\r\n                                                    {marketItemsList}\r\n                                                    {/* <option value=\"BTC\">BTC</option>\r\n                                                    <option value=\"ETH\">ETH</option>\r\n                                                    <option value=\"aaveusdt\">AAVE</option> */}\r\n                                                </select>\r\n                                                <label htmlFor=\"floatingSelect\">\r\n                                                    Market\r\n                                                </label>\r\n                                            </div>\r\n                                            <div className=\"form-floating mb-3\">\r\n                                                <select\r\n                                                    className=\"form-select\"\r\n                                                    id=\"floatingSelect\"\r\n                                                    aria-label=\"Floating label select example\"\r\n                                                    value={side}\r\n                                                    onChange={(e) =>\r\n                                                        setSide(e.target.value)\r\n                                                    }\r\n                                                    name=\"side\"\r\n                                                >\r\n                                                    <option value=\"buy\">\r\n                                                        Buy\r\n                                                    </option>\r\n                                                    <option value=\"sell\">\r\n                                                        Sell\r\n                                                    </option>\r\n                                                </select>\r\n                                                <label htmlFor=\"floatingSelect\">\r\n                                                    Order Side\r\n                                                </label>\r\n                                            </div>\r\n                                            <div className=\"form-floating mb-3\">\r\n                                                <select\r\n                                                    className=\"form-select\"\r\n                                                    id=\"floatingSelect\"\r\n                                                    aria-label=\"Floating label select example\"\r\n                                                    value={ord_type}\r\n                                                    onChange={(e) =>\r\n                                                        setOrd_type(\r\n                                                            e.target.value\r\n                                                        )\r\n                                                    }\r\n                                                    name=\"ord_type\"\r\n                                                >\r\n                                                    <option value=\"limit\">\r\n                                                        Limit\r\n                                                    </option>\r\n                                                    <option value=\"market\">\r\n                                                        Market\r\n                                                    </option>\r\n                                                </select>\r\n                                                <label htmlFor=\"floatingSelect\">\r\n                                                    Order Type\r\n                                                </label>\r\n                                            </div>\r\n\r\n                                            <div className=\"input-group mb-3\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    className=\"form-control\"\r\n                                                    placeholder=\"Price\"\r\n                                                    aria-label=\"Recipient's username\"\r\n                                                    aria-describedby=\"basic-addon2\"\r\n                                                    value={price}\r\n                                                    onChange={(e) =>\r\n                                                        setPrice(e.target.value)\r\n                                                    }\r\n                                                    name=\"price\"\r\n                                                />\r\n                                                <span\r\n                                                    className=\"input-group-text\"\r\n                                                    id=\"basic-addon2\"\r\n                                                >\r\n                                                    USDT\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"input-group mb-3\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    className=\"form-control\"\r\n                                                    placeholder=\"Amount\"\r\n                                                    aria-label=\"Recipient's username\"\r\n                                                    aria-describedby=\"basic-addon2\"\r\n                                                    value={volume}\r\n                                                    onChange={(e) =>\r\n                                                        setVolume(\r\n                                                            e.target.value\r\n                                                        )\r\n                                                    }\r\n                                                    name=\"volume\"\r\n                                                />\r\n                                                <span\r\n                                                    className=\"input-group-text\"\r\n                                                    id=\"basic-addon2\"\r\n                                                >\r\n                                                    AAVE\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"row mb-3\">\r\n                                                <div className=\"col-md-12\">\r\n                                                    <ul className=\"list-group\">\r\n                                                        <li className=\"list-group-item\">\r\n                                                            Total{' '}\r\n                                                            <span className=\" float-end\">\r\n                                                                {price * volume}\r\n                                                                .0000000000 USDT\r\n                                                            </span>\r\n                                                        </li>\r\n                                                        <li className=\"list-group-item\">\r\n                                                            Available{' '}\r\n                                                            <span className=\" float-end\">\r\n                                                                9892.98970000\r\n                                                                USDT\r\n                                                            </span>\r\n                                                        </li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"row mb-3\">\r\n                                                <div className=\"col-md-12\">\r\n                                                    <div className=\"d-grid gap-2\">\r\n                                                        {/* <button className=\"btn btn-primary\" type=\"button\">Buy</button> */}\r\n                                                        <input\r\n                                                            type=\"submit\"\r\n                                                            value=\"Buy\"\r\n                                                            className=\"btn btn-primary\"\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </form>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Trade\r\n"]},"metadata":{},"sourceType":"module"}