{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/rubi/Documents/GitHub/xbt-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rubi/Documents/GitHub/xbt-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\rubi\\\\Documents\\\\GitHub\\\\xbt-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Navigate}from'react-router-dom';// import './css/customProfile.css';\n// import './js/scripts.js';\nimport'./js/datatables-simple-demo.js';import'./css/styles.css';// import { useEffect } from 'react';\n// import { Helmet } from \"react-helmet\";\n// import React, { useEffect, useState } from \"react\";\nimport React,{useState,useEffect}from'react';import axios from'axios';// import { getWithExpiry } from \"../../helper/utils\";\nimport{Link}from'react-router-dom';import DashboardNavbar from'./base/DashboardNavbar';import DashboardLayoutSideNav from'./base/DashboardLayoutSideNav.js';import Cookies from'js-cookie';import{defaultAPI}from'../../api/api.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Trade=function Trade(_ref){var user=_ref.user,setUser=_ref.setUser;var getIteminfo=JSON.parse(localStorage.getItem('user-info'));var cookieFromLogin=Cookies.get('_barong_session');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),marketItem=_useState2[0],setMarketItem=_useState2[1];// get market item\nuseEffect(function(){var isMounted=true;function getMarketItemData(){return _getMarketItemData.apply(this,arguments);}function _getMarketItemData(){_getMarketItemData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(defaultAPI.api.tradeUrl,\"/public/markets\"));case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(isMounted)setMarketItem(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getMarketItemData.apply(this,arguments);}getMarketItemData();return function(){isMounted=false;};},[]);// const value = getWithExpiry(\"user-info\");\n// console.log(value);\n// const cors = require('cors');\n// const corsOptions = {\n//   origin: 'https://cp.btfd.cc/api/v2/peatio/market/orders',\n//   credentials: true,            //access-control-allow-credentials:true\n//   optionSuccessStatus: 200\n// }\n// app.use(cors(corsOptions));\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),market=_useState4[0],setMarket=_useState4[1];var _useState5=useState('buy'),_useState6=_slicedToArray(_useState5,2),side=_useState6[0],setSide=_useState6[1];var _useState7=useState('limit'),_useState8=_slicedToArray(_useState7,2),ord_type=_useState8[0],setOrd_type=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),price=_useState10[0],setPrice=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),volume=_useState12[0],setVolume=_useState12[1];// console.log(user);\n// submit buy sell form\nvar onSubmitBuySell=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var item,csrf_token,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();// const cookieFromLogin = Cookies.get('_barong_session');\n// let item = { market, side, ord_type, price, volume, cookieFromLogin };\nitem={market:market,side:side,ord_type:ord_type,price:price,volume:volume};csrf_token=user.csrf_token;// console.log(user);\n// const cookieFromLogin = Cookies.get('_barong_session');\n// console.log(cookieFromLogin);\nconsole.log(item);// let result = await fetch(\n//   \"https://cp.btfd.cc/api/v2/peatio/market/orders\",\n//   {\n//     mode: 'no-cors',\n//     withCredentials: 'true',\n//     method: \"POST\",\n//     body: JSON.stringify(item),\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       \"Accept\": \"application/json\",\n//       \"Access-Control-Allow-Origin\": \"*\"\n//     },\n//   }\n// );\n// new request\n_context2.next=6;return fetch(\"\".concat(defaultAPI.api.tradeUrl,\"/market/orders\"),{// mode: 'no-cors',\nmethod:'POST',withCredentials:'true',headers:{'Content-Type':'application/json','X-CSRF-TOKEN':getIteminfo.value.csrf_token,'Access-Control-Allow-Methods':'GET,PUT,POST,DELETE,PATCH,OPTIONS',// 'Accept': 'application/json',\n// 'Content-Type': 'application/json',\n// 'Authorization': `Bearer ${csrf_token}`,\nCookie:cookieFromLogin||undefined// 'Cache': 'no-cache',\n// 'X-Csrf-Token': csrf_token || undefined\n// Authorization: csrf_token || undefined,\n},credentials:'same-origin',// credentials: 'include',\nbody:JSON.stringify(item)});case 6:result=_context2.sent;// another req\n// let result = await axios.post('https://cp.btfd.cc/api/v2/peatio/market/orders', item, { withCredentials: true });\nconsole.log(result);// result = await result.json();\n// console.log({ result });\n// console.log(result);\n// if (!result.ok) {\n//   result = await result.json();\n//   console.log(result);\n// }\ncase 8:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmitBuySell(_x){return _ref2.apply(this,arguments);};}();// get market item list in view\nvar marketItemsList=marketItem.map(function(market){return/*#__PURE__*/_jsx(\"option\",{value:market.id,children:market.name},market.id);});if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"sb-nav-fixed profilediv\",children:[/*#__PURE__*/_jsx(DashboardNavbar,{user:user,setUser:setUser}),/*#__PURE__*/_jsxs(\"div\",{id:\"layoutSidenav\",children:[/*#__PURE__*/_jsx(DashboardLayoutSideNav,{}),/*#__PURE__*/_jsx(\"div\",{id:\"layoutSidenav_content\",children:/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid px-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4  mt-5 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3 profile-user-form-div card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-center\",children:[' ',\"One Click Buy/Sell\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitBuySell,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"form-select\",id:\"floatingSelect\",\"aria-label\":\"Floating label select example\",value:market,onChange:function onChange(e){return setMarket(e.target.value);},name:\"market\",children:marketItemsList}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingSelect\",children:\"Market\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",id:\"floatingSelect\",\"aria-label\":\"Floating label select example\",value:side,onChange:function onChange(e){return setSide(e.target.value);},name:\"side\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"buy\",children:\"Buy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sell\",children:\"Sell\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingSelect\",children:\"Order Side\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",id:\"floatingSelect\",\"aria-label\":\"Floating label select example\",value:ord_type,onChange:function onChange(e){return setOrd_type(e.target.value);},name:\"ord_type\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"limit\",children:\"Limit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"market\",children:\"Market\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingSelect\",children:\"Order Type\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Price\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\",value:price,onChange:function onChange(e){return setPrice(e.target.value);},name:\"price\"}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon2\",children:\"USDT\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Amount\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\",value:volume,onChange:function onChange(e){return setVolume(e.target.value);},name:\"volume\"}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon2\",children:\"AAVE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Total\",' ',/*#__PURE__*/_jsxs(\"span\",{className:\" float-end\",children:[price*volume,\".0000000000 USDT\"]})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Available\",' ',/*#__PURE__*/_jsx(\"span\",{className:\" float-end\",children:\"9892.98970000 USDT\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Buy\",className:\"btn btn-primary\"})})})})]})]})})})})})]})]})});};export default Trade;","map":{"version":3,"sources":["C:/Users/rubi/Documents/GitHub/xbt-frontend/src/components/dashboard/Trade.js"],"names":["Navigate","React","useState","useEffect","axios","Link","DashboardNavbar","DashboardLayoutSideNav","Cookies","defaultAPI","Trade","user","setUser","getIteminfo","JSON","parse","localStorage","getItem","cookieFromLogin","get","marketItem","setMarketItem","isMounted","getMarketItemData","fetch","api","tradeUrl","res","json","data","market","setMarket","side","setSide","ord_type","setOrd_type","price","setPrice","volume","setVolume","onSubmitBuySell","e","preventDefault","item","csrf_token","console","log","method","withCredentials","headers","value","Cookie","undefined","credentials","body","stringify","result","marketItemsList","map","id","name","target"],"mappings":"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","sourcesContent":["import { Navigate } from 'react-router-dom'\r\n// import './css/customProfile.css';\r\n// import './js/scripts.js';\r\nimport './js/datatables-simple-demo.js'\r\nimport './css/styles.css'\r\n// import { useEffect } from 'react';\r\n// import { Helmet } from \"react-helmet\";\r\n// import React, { useEffect, useState } from \"react\";\r\nimport React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n// import { getWithExpiry } from \"../../helper/utils\";\r\nimport { Link } from 'react-router-dom'\r\nimport DashboardNavbar from './base/DashboardNavbar'\r\nimport DashboardLayoutSideNav from './base/DashboardLayoutSideNav.js'\r\nimport Cookies from 'js-cookie'\r\nimport { defaultAPI } from '../../api/api.js'\r\n\r\nconst Trade = ({ user, setUser }) => {\r\n    const getIteminfo = JSON.parse(localStorage.getItem('user-info'))\r\n    const cookieFromLogin = Cookies.get('_barong_session')\r\n    const [marketItem, setMarketItem] = useState([])\r\n    // get market item\r\n    useEffect(() => {\r\n        let isMounted = true\r\n\r\n        async function getMarketItemData() {\r\n            const res = await fetch(`${defaultAPI.api.tradeUrl}/public/markets`)\r\n            const data = await res.json()\r\n            if (isMounted) setMarketItem(data)\r\n        }\r\n        getMarketItemData()\r\n\r\n        return () => {\r\n            isMounted = false\r\n        }\r\n    }, [])\r\n\r\n    // const value = getWithExpiry(\"user-info\");\r\n    // console.log(value);\r\n    // const cors = require('cors');\r\n    // const corsOptions = {\r\n    //   origin: 'https://cp.btfd.cc/api/v2/peatio/market/orders',\r\n    //   credentials: true,            //access-control-allow-credentials:true\r\n    //   optionSuccessStatus: 200\r\n    // }\r\n    // app.use(cors(corsOptions));\r\n    const [market, setMarket] = useState('')\r\n    const [side, setSide] = useState('buy')\r\n    const [ord_type, setOrd_type] = useState('limit')\r\n    const [price, setPrice] = useState('')\r\n    const [volume, setVolume] = useState('')\r\n\r\n    // console.log(user);\r\n\r\n    // submit buy sell form\r\n    const onSubmitBuySell = async (e) => {\r\n        e.preventDefault()\r\n        // const cookieFromLogin = Cookies.get('_barong_session');\r\n\r\n        // let item = { market, side, ord_type, price, volume, cookieFromLogin };\r\n        let item = { market, side, ord_type, price, volume }\r\n\r\n        const { csrf_token } = user\r\n        // console.log(user);\r\n        // const cookieFromLogin = Cookies.get('_barong_session');\r\n        // console.log(cookieFromLogin);\r\n\r\n        console.log(item)\r\n\r\n        // let result = await fetch(\r\n        //   \"https://cp.btfd.cc/api/v2/peatio/market/orders\",\r\n\r\n        //   {\r\n\r\n        //     mode: 'no-cors',\r\n        //     withCredentials: 'true',\r\n        //     method: \"POST\",\r\n        //     body: JSON.stringify(item),\r\n        //     headers: {\r\n\r\n        //       \"Content-Type\": \"application/json\",\r\n        //       \"Accept\": \"application/json\",\r\n        //       \"Access-Control-Allow-Origin\": \"*\"\r\n        //     },\r\n        //   }\r\n        // );\r\n\r\n        // new request\r\n        let result = await fetch(`${defaultAPI.api.tradeUrl}/market/orders`, {\r\n            // mode: 'no-cors',\r\n            method: 'POST',\r\n            withCredentials: 'true',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-CSRF-TOKEN': getIteminfo.value.csrf_token,\r\n                'Access-Control-Allow-Methods':\r\n                    'GET,PUT,POST,DELETE,PATCH,OPTIONS',\r\n                // 'Accept': 'application/json',\r\n                // 'Content-Type': 'application/json',\r\n                // 'Authorization': `Bearer ${csrf_token}`,\r\n                Cookie: cookieFromLogin || undefined,\r\n                // 'Cache': 'no-cache',\r\n                // 'X-Csrf-Token': csrf_token || undefined\r\n                // Authorization: csrf_token || undefined,\r\n            },\r\n            credentials: 'same-origin',\r\n            // credentials: 'include',\r\n            body: JSON.stringify(item),\r\n        })\r\n\r\n        // another req\r\n\r\n        // let result = await axios.post('https://cp.btfd.cc/api/v2/peatio/market/orders', item, { withCredentials: true });\r\n\r\n        console.log(result)\r\n\r\n        // result = await result.json();\r\n        // console.log({ result });\r\n        // console.log(result);\r\n\r\n        // if (!result.ok) {\r\n        //   result = await result.json();\r\n        //   console.log(result);\r\n\r\n        // }\r\n    }\r\n\r\n    // get market item list in view\r\n\r\n    const marketItemsList = marketItem.map((market) => {\r\n        return (\r\n            <option key={market.id} value={market.id}>\r\n                {market.name}\r\n            </option>\r\n        )\r\n    })\r\n\r\n    if (!user) return <Navigate to=\"/login\" />\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"sb-nav-fixed profilediv\">\r\n                <DashboardNavbar user={user} setUser={setUser} />\r\n\r\n                <div id=\"layoutSidenav\">\r\n                    <DashboardLayoutSideNav />\r\n                    <div id=\"layoutSidenav_content\">\r\n                        <main>\r\n                            <div className=\"container-fluid px-4\">\r\n                                {/* for a user form */}\r\n\r\n                                <div className=\"row mt-4  mt-5 \">\r\n                                    <div className=\"col-md-6 offset-md-3 profile-user-form-div card\">\r\n                                        <h3 className=\"text-center\">\r\n                                            {' '}\r\n                                            One Click Buy/Sell\r\n                                        </h3>\r\n\r\n                                        <form onSubmit={onSubmitBuySell}>\r\n                                            <div className=\"form-floating mb-3\">\r\n                                                <select\r\n                                                    className=\"form-select\"\r\n                                                    id=\"floatingSelect\"\r\n                                                    aria-label=\"Floating label select example\"\r\n                                                    value={market}\r\n                                                    onChange={(e) =>\r\n                                                        setMarket(\r\n                                                            e.target.value\r\n                                                        )\r\n                                                    }\r\n                                                    name=\"market\"\r\n                                                >\r\n                                                    {marketItemsList}\r\n                                                    {/* <option value=\"BTC\">BTC</option>\r\n                                                    <option value=\"ETH\">ETH</option>\r\n                                                    <option value=\"aaveusdt\">AAVE</option> */}\r\n                                                </select>\r\n                                                <label htmlFor=\"floatingSelect\">\r\n                                                    Market\r\n                                                </label>\r\n                                            </div>\r\n                                            <div className=\"form-floating mb-3\">\r\n                                                <select\r\n                                                    className=\"form-select\"\r\n                                                    id=\"floatingSelect\"\r\n                                                    aria-label=\"Floating label select example\"\r\n                                                    value={side}\r\n                                                    onChange={(e) =>\r\n                                                        setSide(e.target.value)\r\n                                                    }\r\n                                                    name=\"side\"\r\n                                                >\r\n                                                    <option value=\"buy\">\r\n                                                        Buy\r\n                                                    </option>\r\n                                                    <option value=\"sell\">\r\n                                                        Sell\r\n                                                    </option>\r\n                                                </select>\r\n                                                <label htmlFor=\"floatingSelect\">\r\n                                                    Order Side\r\n                                                </label>\r\n                                            </div>\r\n                                            <div className=\"form-floating mb-3\">\r\n                                                <select\r\n                                                    className=\"form-select\"\r\n                                                    id=\"floatingSelect\"\r\n                                                    aria-label=\"Floating label select example\"\r\n                                                    value={ord_type}\r\n                                                    onChange={(e) =>\r\n                                                        setOrd_type(\r\n                                                            e.target.value\r\n                                                        )\r\n                                                    }\r\n                                                    name=\"ord_type\"\r\n                                                >\r\n                                                    <option value=\"limit\">\r\n                                                        Limit\r\n                                                    </option>\r\n                                                    <option value=\"market\">\r\n                                                        Market\r\n                                                    </option>\r\n                                                </select>\r\n                                                <label htmlFor=\"floatingSelect\">\r\n                                                    Order Type\r\n                                                </label>\r\n                                            </div>\r\n\r\n                                            <div className=\"input-group mb-3\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    className=\"form-control\"\r\n                                                    placeholder=\"Price\"\r\n                                                    aria-label=\"Recipient's username\"\r\n                                                    aria-describedby=\"basic-addon2\"\r\n                                                    value={price}\r\n                                                    onChange={(e) =>\r\n                                                        setPrice(e.target.value)\r\n                                                    }\r\n                                                    name=\"price\"\r\n                                                />\r\n                                                <span\r\n                                                    className=\"input-group-text\"\r\n                                                    id=\"basic-addon2\"\r\n                                                >\r\n                                                    USDT\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"input-group mb-3\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    className=\"form-control\"\r\n                                                    placeholder=\"Amount\"\r\n                                                    aria-label=\"Recipient's username\"\r\n                                                    aria-describedby=\"basic-addon2\"\r\n                                                    value={volume}\r\n                                                    onChange={(e) =>\r\n                                                        setVolume(\r\n                                                            e.target.value\r\n                                                        )\r\n                                                    }\r\n                                                    name=\"volume\"\r\n                                                />\r\n                                                <span\r\n                                                    className=\"input-group-text\"\r\n                                                    id=\"basic-addon2\"\r\n                                                >\r\n                                                    AAVE\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"row mb-3\">\r\n                                                <div className=\"col-md-12\">\r\n                                                    <ul className=\"list-group\">\r\n                                                        <li className=\"list-group-item\">\r\n                                                            Total{' '}\r\n                                                            <span className=\" float-end\">\r\n                                                                {price * volume}\r\n                                                                .0000000000 USDT\r\n                                                            </span>\r\n                                                        </li>\r\n                                                        <li className=\"list-group-item\">\r\n                                                            Available{' '}\r\n                                                            <span className=\" float-end\">\r\n                                                                9892.98970000\r\n                                                                USDT\r\n                                                            </span>\r\n                                                        </li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"row mb-3\">\r\n                                                <div className=\"col-md-12\">\r\n                                                    <div className=\"d-grid gap-2\">\r\n                                                        {/* <button className=\"btn btn-primary\" type=\"button\">Buy</button> */}\r\n                                                        <input\r\n                                                            type=\"submit\"\r\n                                                            value=\"Buy\"\r\n                                                            className=\"btn btn-primary\"\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </form>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Trade\r\n"]},"metadata":{},"sourceType":"module"}